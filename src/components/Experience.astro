---
interface Job {
  title: string;
  company: string;
  period?: string;
  description?: string;
  color: string;
  icon: string;
  featured?: boolean;
}

const jobs: Job[] = [
  {
    title: 'Full-Stack Software Engineer',
    company: 'Tire Guru',
    period: 'Present',
    description: 'Building and maintaining web applications using PHP, Laravel, and AWS. Developing RESTful APIs and managing cloud infrastructure.',
    color: 'primary',
    icon: 'fas fa-code',
    featured: true,
  },
  {
    title: 'Software Tester',
    company: 'iFit',
    description: 'Quality assurance and testing for fitness technology applications.',
    color: 'pink',
    icon: 'fas fa-vial',
  },
  {
    title: 'Driver / Mover',
    company: 'Wasatch Moving Co.',
    color: 'indigo',
    icon: 'fas fa-truck',
  },
  {
    title: 'Crew Member',
    company: 'Outback Firefighting',
    description: 'Wildfire suppression and emergency response.',
    color: 'red',
    icon: 'fas fa-fire',
  },
  {
    title: 'Mowing and Irrigation',
    company: 'The Yard Shop',
    color: 'green',
    icon: 'fas fa-leaf',
  },
  {
    title: 'Lube Tech',
    company: 'Valvoline',
    color: 'blue',
    icon: 'fas fa-car',
  },
];

const colorMap: Record<string, { bg: string; border: string; text: string }> = {
  primary: { bg: 'bg-primary-500/10', border: 'border-primary-500', text: 'text-primary-400' },
  pink: { bg: 'bg-pink-500/10', border: 'border-pink-500', text: 'text-pink-400' },
  indigo: { bg: 'bg-indigo-500/10', border: 'border-indigo-500', text: 'text-indigo-400' },
  red: { bg: 'bg-red-500/10', border: 'border-red-500', text: 'text-red-400' },
  green: { bg: 'bg-green-500/10', border: 'border-green-500', text: 'text-green-400' },
  blue: { bg: 'bg-blue-500/10', border: 'border-blue-500', text: 'text-blue-400' },
  purple: { bg: 'bg-purple-500/10', border: 'border-purple-500', text: 'text-purple-400' },
};
---

<section id="experience" class="py-24">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Section Header -->
    <div class="text-center mb-16 animate-on-scroll">
      <span class="inline-block px-4 py-1 rounded-full bg-primary-500/10 text-primary-400 text-sm font-medium mb-4">
        Experience
      </span>
      <h2 class="text-3xl sm:text-4xl font-bold text-surface-100">
        Work History
      </h2>
      <p class="mt-4 text-surface-400 max-w-2xl mx-auto">
        From firefighting to full-stack developmentâ€”every role shaped my problem-solving mindset.
      </p>
    </div>

    <!-- Timeline -->
    <div class="relative">
      <!-- Vertical Line -->
      <div class="absolute left-8 top-0 bottom-0 w-0.5 bg-gradient-to-b from-primary-500 via-surface-600 to-surface-700"></div>

      <!-- Timeline Items -->
      <div class="space-y-8">
        {jobs.map((job, index) => {
          const colors = colorMap[job.color];
          return (
            <div 
              class={`relative pl-20 animate-on-scroll ${job.featured ? 'py-2' : ''}`}
              style={`animation-delay: ${index * 0.1}s;`}
            >
              <!-- Timeline Dot -->
              <div class={`absolute left-6 w-5 h-5 rounded-full ${colors.bg} border-2 ${colors.border} flex items-center justify-center`}>
                <div class={`w-2 h-2 rounded-full ${colors.border.replace('border', 'bg')}`}></div>
              </div>

              <!-- Content Card -->
              <div class={`
                p-6 rounded-xl border transition-all duration-300
                ${job.featured 
                  ? 'bg-surface-800 border-primary-500/50 shadow-lg shadow-primary-500/10' 
                  : 'bg-surface-800/50 border-surface-700 hover:border-surface-600'
                }
              `}>
                <div class="flex flex-wrap items-start justify-between gap-2 mb-2">
                  <div>
                    <h3 class="text-lg font-bold text-surface-100">{job.title}</h3>
                    <div class={`flex items-center space-x-2 ${colors.text}`}>
                      <i class={`${job.icon} text-sm`}></i>
                      <span class="font-medium">{job.company}</span>
                    </div>
                  </div>
                  {job.period && (
                    <span class="px-3 py-1 rounded-full bg-primary-500/10 text-primary-400 text-sm font-medium">
                      {job.period}
                    </span>
                  )}
                </div>
                
                {job.description && (
                  <p class="text-surface-400 mt-3">{job.description}</p>
                )}
              </div>
            </div>
          );
        })}
      </div>
    </div>
  </div>
</section>
